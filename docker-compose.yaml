---
# version: '3.8'

services:
  janus-nginx1:
    image: nginx:latest
    container_name: janus-nginx1
    depends_on:
      - janus-php
    networks:
      - janus-prod-net

  janus-php:
    image: php:fpm
    container_name: janus-php
    networks:
      - janus-prod-net

  janus-mysql:
    image: mysql:latest
    container_name: janus-mysql
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_DATABASE: mydatabase
      MYSQL_USER: user
      MYSQL_PASSWORD: password
      MYSQL_REPLICATION_USER: repl_user
      MYSQL_REPLICATION_PASSWORD: repl_password
      # command: --server-id=1 --log-bin=mysql-bin --binlog-do-db=mydatabase
    volumes:
      - mysql_data:/var/lib/mysql
    networks:
      - janus-prod-net

networks:
  janus-prod-net:

volumes:
  mysql_data:
